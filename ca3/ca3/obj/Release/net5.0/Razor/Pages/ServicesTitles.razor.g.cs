#pragma checksum "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "553ede4b4311ac41181b88c34fa4f3b2ed3ce251"
// <auto-generated/>
#pragma warning disable 1591
namespace ca3.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "D:\College\Year 4\EAD\ca3\ca3\ca3\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\College\Year 4\EAD\ca3\ca3\ca3\_Imports.razor"
using System.Net.Http.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "D:\College\Year 4\EAD\ca3\ca3\ca3\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "D:\College\Year 4\EAD\ca3\ca3\ca3\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "D:\College\Year 4\EAD\ca3\ca3\ca3\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "D:\College\Year 4\EAD\ca3\ca3\ca3\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "D:\College\Year 4\EAD\ca3\ca3\ca3\_Imports.razor"
using Microsoft.AspNetCore.Components.WebAssembly.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "D:\College\Year 4\EAD\ca3\ca3\ca3\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "D:\College\Year 4\EAD\ca3\ca3\ca3\_Imports.razor"
using ca3;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "D:\College\Year 4\EAD\ca3\ca3\ca3\_Imports.razor"
using ca3.Shared;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/servicesTitles/{serviceId:int}")]
    public partial class ServicesTitles : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.AddMarkupContent(0, "<h2 id=\"servicesList\">Services List</h2>");
#nullable restore
#line 5 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
 if (titlesList == null || genres == null)
{

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(1, "<p><em>Loading...</em></p>");
#nullable restore
#line 8 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
}
else
{

#line default
#line hidden
#nullable disable
            __builder.OpenElement(2, "div");
            __builder.AddAttribute(3, "class", "row");
            __builder.OpenElement(4, "div");
            __builder.AddAttribute(5, "class", "col-4");
            __builder.AddMarkupContent(6, "<p>Genre:</p>\r\n            ");
            __builder.OpenElement(7, "select");
            __builder.AddAttribute(8, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.ChangeEventArgs>(this, 
#nullable restore
#line 14 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                               setGenre

#line default
#line hidden
#nullable disable
            ));
            __builder.OpenElement(9, "option");
            __builder.AddAttribute(10, "value", 
#nullable restore
#line 15 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                                int.MaxValue

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(11, "All");
            __builder.CloseElement();
#nullable restore
#line 16 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                 foreach (var genre in genres)
                {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(12, "option");
            __builder.AddAttribute(13, "value", 
#nullable restore
#line 18 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                                   genre.id

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(14, 
#nullable restore
#line 18 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                                             genre.name

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 19 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(15, "\r\n        ");
            __builder.OpenElement(16, "div");
            __builder.AddAttribute(17, "class", "col-4");
            __builder.AddMarkupContent(18, "<p>Region:</p>\r\n            ");
            __builder.OpenElement(19, "select");
            __builder.AddAttribute(20, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.ChangeEventArgs>(this, 
#nullable restore
#line 24 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                               setRegion

#line default
#line hidden
#nullable disable
            ));
#nullable restore
#line 25 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                 foreach (var region in regions)
                {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(21, "option");
            __builder.AddAttribute(22, "value", 
#nullable restore
#line 27 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                                   region.country

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(23, 
#nullable restore
#line 27 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                                                   region.name

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 28 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(24, "\r\n        ");
            __builder.OpenElement(25, "div");
            __builder.AddAttribute(26, "class", "col-4");
            __builder.OpenElement(27, "p");
            __builder.AddContent(28, "Showing results ");
            __builder.AddContent(29, 
#nullable restore
#line 32 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                                firstOnPage()

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(30, " -> ");
            __builder.AddContent(31, 
#nullable restore
#line 32 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                                                  totalOnPage()

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(32, " of ");
            __builder.AddContent(33, 
#nullable restore
#line 32 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                                                                    titlesList.total_results

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(34, "\r\n            ");
            __builder.OpenElement(35, "p");
            __builder.AddContent(36, "Pages: ");
            __builder.AddContent(37, 
#nullable restore
#line 33 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                       titlesList.page

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(38, " / ");
            __builder.AddContent(39, 
#nullable restore
#line 33 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                                          titlesList.total_pages

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(40, "\r\n            ");
            __builder.OpenElement(41, "button");
            __builder.AddAttribute(42, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 34 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                              PreiousPage

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(43, "Previous");
            __builder.CloseElement();
            __builder.AddMarkupContent(44, "\r\n            ");
            __builder.OpenElement(45, "button");
            __builder.AddAttribute(46, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 35 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                              nextPage

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(47, "Next");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(48, "\r\n    ");
            __builder.OpenElement(49, "div");
            __builder.AddAttribute(50, "class", "row");
            __builder.OpenElement(51, "button");
            __builder.AddAttribute(52, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 39 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                          getFiltered

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(53, "Filter");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.OpenElement(54, "table");
            __builder.AddAttribute(55, "class", "table");
            __builder.AddMarkupContent(56, "<thead><tr><td>Title</td>\r\n                <td>Year</td>\r\n                <td>Type</td></tr></thead>\r\n        ");
            __builder.OpenElement(57, "tbody");
#nullable restore
#line 51 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
             foreach (var t in titlesList.titles)
            {


#line default
#line hidden
#nullable disable
            __builder.OpenElement(58, "tr");
            __builder.OpenElement(59, "td");
            __builder.OpenElement(60, "a");
            __builder.AddAttribute(61, "id", "title");
            __builder.AddAttribute(62, "href", "/title/" + (
#nullable restore
#line 56 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                                                    t.id

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(63, 
#nullable restore
#line 56 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                                                           t.title

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(64, "\r\n                    ");
            __builder.OpenElement(65, "td");
            __builder.AddContent(66, 
#nullable restore
#line 57 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                         t.year

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(67, "\r\n                    ");
            __builder.OpenElement(68, "td");
            __builder.AddContent(69, 
#nullable restore
#line 58 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                         t.type

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 61 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"

            }

#line default
#line hidden
#nullable disable
#nullable restore
#line 63 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
             if (titlesList.titles.Count() == 0)
            {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(70, "<tr><td> NO More Results with Current FIlters</td></tr>");
#nullable restore
#line 68 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
            }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.OpenElement(71, "div");
            __builder.AddAttribute(72, "class", "col-4");
            __builder.OpenElement(73, "p");
            __builder.AddContent(74, "Showing results ");
            __builder.AddContent(75, 
#nullable restore
#line 73 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                            firstOnPage()

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(76, " -> ");
            __builder.AddContent(77, 
#nullable restore
#line 73 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                                              totalOnPage()

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(78, " of ");
            __builder.AddContent(79, 
#nullable restore
#line 73 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                                                                titlesList.total_results

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(80, "\r\n        ");
            __builder.OpenElement(81, "p");
            __builder.AddContent(82, "Pages: ");
            __builder.AddContent(83, 
#nullable restore
#line 74 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                   titlesList.page

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(84, " / ");
            __builder.AddContent(85, 
#nullable restore
#line 74 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                                      titlesList.total_pages

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(86, "\r\n        ");
            __builder.OpenElement(87, "button");
            __builder.AddAttribute(88, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 75 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                          PreiousPage

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(89, "Previous");
            __builder.CloseElement();
            __builder.AddMarkupContent(90, "\r\n        ");
            __builder.OpenElement(91, "button");
            __builder.AddAttribute(92, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 76 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
                          nextPage

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(93, "Next");
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 78 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
}

#line default
#line hidden
#nullable disable
        }
        #pragma warning restore 1998
#nullable restore
#line 81 "D:\College\Year 4\EAD\ca3\ca3\ca3\Pages\ServicesTitles.razor"
       


    [Parameter]
    public int serviceId { get; set; }

    private Titles titlesList;
    private int page = 1;
    private Genres[] genres;
    private int genre = int.MaxValue;
    private Countries[] regions;
    private string region = "us";

    public void setGenre(ChangeEventArgs e)
    {
        genre = Int32.Parse(e.Value.ToString());
    }

    public void setRegion(ChangeEventArgs e)
    {
        region = e.Value.ToString();
    }

    public int totalOnPage()
    {
        return (titlesList.titles.Count * page);
    }
    public int firstOnPage()
    {
        return ((page - 1) * 250 + 1);
    }

    public async Task nextPage()
    {
        if (page < titlesList.total_pages && titlesList.titles.Count != 0)
        {
            page += 1;
            if (genre != int.MaxValue)
            {
                string httpString = $"https://api.watchmode.com/v1/list-titles/?apiKey=CHIRTCNnZhHt3Mzd4Bz0K0aLeoXp1Giq9OOI1933&source_ids={serviceId}&regions={region}&page={page}&genres={genre}";
                titlesList = await Http.GetFromJsonAsync<Titles>(httpString);
            }
            else
            {
                string httpString = $"https://api.watchmode.com/v1/list-titles/?apiKey=CHIRTCNnZhHt3Mzd4Bz0K0aLeoXp1Giq9OOI1933&source_ids={serviceId}&regions={region}&page={page}";
                titlesList = await Http.GetFromJsonAsync<Titles>(httpString);
            }

        }
    }

    public async Task PreiousPage()
    {
        if (page != 1)
        {
            page -= 1;
            if (genre != int.MaxValue)
            {
                string httpString = $"https://api.watchmode.com/v1/list-titles/?apiKey=CHIRTCNnZhHt3Mzd4Bz0K0aLeoXp1Giq9OOI1933&source_ids={serviceId}&regions={region}&page={page}&genres={genre}";
                titlesList = await Http.GetFromJsonAsync<Titles>(httpString);
            }
            else
            {
                string httpString = $"https://api.watchmode.com/v1/list-titles/?apiKey=CHIRTCNnZhHt3Mzd4Bz0K0aLeoXp1Giq9OOI1933&source_ids={serviceId}&regions={region}&page={page}";
                titlesList = await Http.GetFromJsonAsync<Titles>(httpString);
            }

        }
    }

    public async Task getFiltered()
    {
        if (genre != int.MaxValue)
        {
            string httpString = $"https://api.watchmode.com/v1/list-titles/?apiKey=CHIRTCNnZhHt3Mzd4Bz0K0aLeoXp1Giq9OOI1933&source_ids={serviceId}&regions={region}&page={page}&genres={genre}";
            titlesList = await Http.GetFromJsonAsync<Titles>(httpString);
        }
        else
        {
            string httpString = $"https://api.watchmode.com/v1/list-titles/?apiKey=CHIRTCNnZhHt3Mzd4Bz0K0aLeoXp1Giq9OOI1933&source_ids={serviceId}&regions={region}&page={page}";
            titlesList = await Http.GetFromJsonAsync<Titles>(httpString);
        }

    }

    protected override async Task OnInitializedAsync()
    {
        string httpString = $"https://api.watchmode.com/v1/list-titles/?apiKey=CHIRTCNnZhHt3Mzd4Bz0K0aLeoXp1Giq9OOI1933&source_ids={serviceId}";
        titlesList = await Http.GetFromJsonAsync<Titles>(httpString);
        genres = await Http.GetFromJsonAsync<Genres[]>("https://api.watchmode.com/v1/genres/?apiKey=CHIRTCNnZhHt3Mzd4Bz0K0aLeoXp1Giq9OOI1933");
        regions = await Http.GetFromJsonAsync<Countries[]>("https://api.watchmode.com/v1/regions/?apiKey=CHIRTCNnZhHt3Mzd4Bz0K0aLeoXp1Giq9OOI1933");
    }

    public class Title
    {
        public int id { get; set; }
        public string title { get; set; }
        public int year { get; set; }
        public string imdb_id { get; set; }
        public int tmdb_id { get; set; }
        public string tmdb_type { get; set; }
        public string type { get; set; }
    }

    public class Titles
    {
        public List<Title> titles { get; set; }
        public int page { get; set; }
        public int total_results { get; set; }
        public int total_pages { get; set; }
    }

    public class Genres
    {
        public int id { get; set; }
        public string name { get; set; }
        public int? tmdb_id { get; set; }
    }

    public class Countries
    {
        public string country { get; set; }
        public string name { get; set; }
        public string flag { get; set; }
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private HttpClient Http { get; set; }
    }
}
#pragma warning restore 1591
